---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring - eliminated all `switch r.ProvisioningProvider.Name()` type checks from controller ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))
- Added `BlockDeletionOnFailure` field to CRD to persist deletion policies across controller restarts
- Created rich result types (`ProvisionResult`, `DeprovisionResult`) to move provider-specific logic out of controller
- Internalized cancellation and finalizer logic into AAP and EDA provider implementations
- Fixed EDA deletion infinite polling bug by adding resource parameter to `GetDeprovisionStatus()` interface method
- Deployed and validated fixes with end-to-end testing - all 90+ unit tests passing, zero linter issues
- Fixed vmaas-dev environment webhook configuration - corrected URLs from non-existent `innabox-eda-service:5000` to working `innabox-aap-eda-api:8000`
- Discovered and verified 4.3x EDA performance improvement (649s â†’ 140s provision time) - confirmed real improvement from external infrastructure changes, not operator code
- Corrected understanding of EDA webhook architecture - `innabox-eda-service:5000` is dynamically created by activation jobs (correct config), `innabox-aap-eda-api:8000` is static service for VM webhooks only
- Pushed commits `74ced2e` and `96423b5` to `tzvatot/cloudkit-operator:feature/aap-provisioning-MGMT-23031`
- Discovered critical bug: concurrent provision and deprovision jobs running simultaneously during deletion ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))

## Risks & Challenges
- **CRITICAL:** Concurrent provision/deprovision jobs bug - provision job (7265) still running when deprovision job (7267) started during ComputeInstance deletion. Expected behavior: provision should be cancelled before deprovision starts. Possible race condition in `isReadyForDeprovision()` logic.
- **CARRIED FORWARD:** AAP Direct missing ReconciledConfigVersion update - doesn't set this field when provision succeeds, preventing controller from detecting spec changes vs already-reconciled state. Need to populate ReconciledVersion in AAP provider `getJobStatus()` method.

## Key Effort
Achieved complete provider abstraction by eliminating type switches and moving provider-specific logic into rich result types and CRD fields
