---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring for [MGMT-22880](https://issues.redhat.com/browse/MGMT-22880) - eliminated all `switch r.ProvisioningProvider.Name()` statements from controller by moving provider-specific logic into provider implementations
- Added `BlockDeletionOnFailure` field to CRD to store deletion policies, enabling crash-safe behavior without provider type checking
- Created rich result types (`ProvisionResult`, `DeprovisionResult`) and updated `ProvisioningProvider` interface to return provider decisions instead of requiring controller to check provider type
- Fixed EDA deletion infinite polling bug by adding `resource` parameter to status methods, allowing EDA provider to detect completion via finalizer removal
- Fixed vmaas-dev environment webhook configuration - corrected deployment to use existing `innabox-aap-eda-api:8000` service instead of non-existent `innabox-eda-service:5000`
- Investigated and documented 4.3x EDA performance improvement (649s â†’ 140s provision time) - verified speedup is real and caused by external infrastructure changes, not operator code
- Deployed refactored operator images: `quay.io/etabak/cloudkit-operator:74ced2e` (initial refactoring) and `quay.io/etabak/cloudkit-operator:96423b5` (with EDA deletion fix)
- All 90+ unit tests passing with zero linter issues after refactoring
- Created test script for ComputeInstance lifecycle validation and monitoring script for experiments
- Discovered critical bug: concurrent provision and deprovision jobs running simultaneously on same ComputeInstance during deletion

## Risks & Challenges
- **CRITICAL BUG:** ComputeInstance `vm-jgkx2` showed provision job (7265) still running while deprovision job (7267) was started - indicates race condition or failed job cancellation in AAP provider's `isReadyForDeprovision()` logic
- **UNRESOLVED:** AAP Direct missing `ReconciledConfigVersion` update when provision succeeds - controller cannot detect spec changes vs already-reconciled state
- **INVESTIGATION NEEDED:** Root cause of 4.3x EDA speedup unclear - may indicate undocumented infrastructure changes

## Key Effort
Completed provider abstraction refactoring to eliminate type switches and achieve provider-agnostic controller architecture with crash-safe deletion policies.
