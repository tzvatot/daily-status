---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments

- Completed provider abstraction refactoring for [MGMT-22880](https://issues.redhat.com/browse/MGMT-22880) - eliminated all `switch r.ProvisioningProvider.Name()` statements from controller by implementing rich result types (`ProvisionResult`, `DeprovisionResult`) and adding `BlockDeletionOnFailure` field to CRD
- Fixed EDA deletion infinite polling bug by adding resource parameter to `GetDeprovisionStatus()` interface method, allowing EDA provider to check AAP finalizer state for completion detection
- Resolved vmaas-dev environment webhook configuration issue - corrected deployment from non-existent `innabox-eda-service:5000` to actual `innabox-aap-eda-api:8000` service endpoints (later reverted after discovering dynamic service architecture)
- Investigated EDA performance improvement - verified genuine 4.3x speedup (649s â†’ ~140s provision time) through controlled testing with both custom and official operator images, ruling out code changes as cause
- Discovered and corrected understanding of EDA webhook architecture - `innabox-eda-service:5000` is dynamically created by activation jobs, not a persistent service
- Pushed commits `74ced2e` (provider abstraction) and `96423b5` (EDA deletion fix) to feature branch
- Deployed and validated fixed operator builds: `quay.io/etabak/cloudkit-operator:74ced2e` and `quay.io/etabak/cloudkit-operator:96423b5`
- Created end-to-end test script `~/work/scripts/test_compute_instance.sh` and validated full ComputeInstance lifecycle
- Improved latency experiment script with direct environment variable checking instead of log parsing for provider verification
- Discovered critical bug: concurrent provision (job 7265) and deprovision (job 7267) jobs running simultaneously on ComputeInstance `vm-jgkx2` - provision job not cancelled before deprovision started

## Risks & Challenges

- **CRITICAL BUG:** Concurrent provision and deprovision jobs detected - AAP provider's `isReadyForDeprovision()` not properly cancelling running provision jobs before starting deprovision, creating potential resource conflicts and orphaned resources
- **OUTSTANDING:** AAP Direct missing ReconciledConfigVersion update in `getJobStatus()` - prevents detection of spec changes vs already-reconciled state
- **MYSTERY:** Unknown infrastructure changes caused 4.3x EDA performance improvement between Feb 8-9 - need to investigate AAP/EDA/Ansible changes

## Key Effort

Refactored provider abstraction to eliminate controller type switches and discovered critical concurrent job execution bug requiring investigation
