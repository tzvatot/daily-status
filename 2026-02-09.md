---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring to eliminate type switches from controller ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))
  - Added `BlockDeletionOnFailure` field to CRD to store deletion policies
  - Created rich result types (`ProvisionResult`, `DeprovisionResult`) to replace provider type checking
  - Internalized provider-specific logic (AAP cancellation, EDA finalizer checks) into provider implementations
  - Eliminated both critical switch statements on provider name from controller
  - All 90+ unit tests passing, zero linter issues
- Fixed EDA deletion infinite polling bug
  - Enhanced provider interface to pass resource object to status methods
  - EDA provider now detects completion via AAP finalizer removal
  - Maintains clean abstraction - no controller-specific EDA handling needed
  - Deployed and validated with end-to-end test
- Fixed vmaas-dev environment webhook configuration
  - Updated deployment to use correct service URLs (`innabox-aap-eda-api:8000` instead of non-existent `innabox-eda-service:5000`)
  - Improved latency experiment script to verify provider configuration directly from environment variables
  - Cleaned up stuck VMs and test resources

## Risks & Challenges
- **CRITICAL:** AAP Direct provider missing `ReconciledConfigVersion` update on successful provision
  - Without this field, controller cannot detect if spec changed vs already reconciled
  - Currently works due to annotation workaround from old EDA playbook
  - Fix needed in `getJobStatus()` to populate `ReconciledVersion` field when job succeeds

## Key Effort
Refactored provider abstraction to eliminate all type switches from controller, moving provider-specific logic into provider implementations with richer result types and persisted deletion policies.
