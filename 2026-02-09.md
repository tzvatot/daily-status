---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring to eliminate all `switch r.ProvisioningProvider.Name()` statements from controller ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))
  - Added `BlockDeletionOnFailure bool` field to JobStatus CRD
  - Created new result types: `ProvisionResult` and `DeprovisionResult` with `DeprovisionAction` enum
  - Updated `ProvisioningProvider` interface: removed `CancelProvision()` and `ShouldProceedWithDeprovision()` methods
  - Internalized AAP provider cancellation logic with helper methods: `launchProvisionJob()`, `isReadyForDeprovision()`, `cancelProvisionJob()`, `launchDeprovisionJob()`
  - Internalized EDA provider finalizer check logic into `TriggerDeprovision()`
  - Modified 9 files; all 90+ unit tests passing; zero linter issues
  - Deployed refactored operator: `quay.io/etabak/cloudkit-operator:74ced2e`
- Fixed critical EDA deletion infinite polling bug
  - Added `resource client.Object` parameter to `GetProvisionStatus()` and `GetDeprovisionStatus()` interface methods
  - EDA provider now checks AAP finalizer to detect completion instead of always returning `Running` state
  - Maintains clean abstraction without controller changes
  - Deployed fixed operator: `quay.io/etabak/cloudkit-operator:96423b5`
  - Validated full lifecycle with test script: creation, verification, deletion completion
  - Test ComputeInstance `019c41fe-449f-7c8a-baf3-b4bfa59f6cd2` completed successfully (23 ansible tasks passed)

## Risks & Challenges
- CRITICAL: AAP Direct missing ReconciledConfigVersion update - AAP Direct doesn't set ReconciledConfigVersion when provision job succeeds, preventing detection of spec changes vs already reconciled state; requires updating AAP provider `getJobStatus()` to populate `ReconciledVersion` field when State=Succeeded

## Key Effort
Provider abstraction refactoring to eliminate type switching and achieve clean provider-agnostic controller architecture
