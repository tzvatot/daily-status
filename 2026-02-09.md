---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring - eliminated all `switch r.ProvisioningProvider.Name()` statements from controller by introducing richer result types (`ProvisionResult`, `DeprovisionResult`) and adding `BlockDeletionOnFailure` field to CRD
- Fixed EDA deletion infinite polling bug by adding resource parameter to status check methods, allowing EDA provider to detect completion via AAP finalizer removal
- Fixed vmaas-dev environment configuration - corrected cloudkit-operator deployment webhook URLs from non-existent `innabox-eda-service:5000` to working `innabox-aap-eda-api:8000` service
- Deployed and validated refactored operator builds: `quay.io/etabak/cloudkit-operator:74ced2e` (refactoring) and `quay.io/etabak/cloudkit-operator:96423b5` (EDA fix)
- All 90+ unit tests passing with zero linter issues across controller, AAP provider, and EDA provider
- Created end-to-end test script (`~/work/scripts/test_compute_instance.sh`) and validated full ComputeInstance lifecycle including deletion completion
- Improved latency experiment script with direct environment variable checking instead of unreliable log parsing

## Risks & Challenges
- **CRITICAL:** AAP Direct missing ReconciledConfigVersion update - AAP provider's `getJobStatus()` doesn't set `ReconciledVersion` field when provision job succeeds, preventing controller from detecting spec changes vs already-reconciled state. Current workaround relies on annotation set by old EDA playbook. Fix needed in `internal/provisioning/aap_provider.go:178`.
- Need to investigate upstream deployment manifests to fix source of incorrect webhook URLs to prevent recurrence

## Key Effort
Achieved complete provider abstraction by eliminating type switches and moving provider-specific logic into provider implementations while maintaining clean separation of concerns and crash-safe deletion policies.
