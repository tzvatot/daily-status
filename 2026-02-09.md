---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))
  - Eliminated all provider type switches from controller
  - Added `BlockDeletionOnFailure` field to CRD for crash-safe deletion policies
  - Created rich result types (`ProvisionResult`, `DeprovisionResult`) to replace interface methods
  - Internalized provider-specific logic (AAP cancellation, EDA finalizer checks) into provider implementations
  - All 90+ tests passing, zero linter issues
  - Deployed refactored operator: `quay.io/etabak/cloudkit-operator:74ced2e`
- Fixed critical EDA deletion infinite polling bug
  - Added resource parameter to `GetProvisionStatus()` and `GetDeprovisionStatus()` interface methods
  - EDA provider now checks AAP finalizer to detect completion instead of polling job status
  - Maintains clean abstraction - no controller changes needed
  - Deployed fixed operator: `quay.io/etabak/cloudkit-operator:96423b5`
  - Validated end-to-end with test script, ComputeInstance lifecycle completes successfully
- Modified 9 files total, regenerated CRDs, all quality checks passing

## Risks & Challenges
- AAP Direct missing `ReconciledConfigVersion` update when provision job succeeds - controller can't detect if spec changed vs already reconciled. Hash mechanism computes FNV-1a of spec â†’ DesiredConfigVersion, but AAP provider's `getJobStatus()` doesn't populate `ReconciledVersion` field. Currently works due to workaround reading annotation set by old EDA playbook.

## Key Effort
Achieved complete provider abstraction in CloudKit operator by eliminating type switches, moving provider-specific logic into provider implementations, and fixing EDA deletion polling bug.
