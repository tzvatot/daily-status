---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring - eliminated all provider type switches from controller by moving provider-specific logic into provider implementations, added BlockDeletionOnFailure field to CRD, created rich result types (ProvisionResult, DeprovisionResult), all 90+ tests passing with zero linter issues
- Fixed [MGMT-22880](https://issues.redhat.com/browse/MGMT-22880) - EDA deletion infinite polling bug by adding resource parameter to status methods allowing providers to inspect resource state (finalizers, annotations) when determining job status
- Fixed job state mapping inconsistencies - added JobStateWaiting and JobStateUnknown states, corrected AAP status mapping (pending/waiting/running were all incorrectly mapped to Running), updated CRD enum validation, added comprehensive unit tests (39 specs), deployed and verified with both AAP and EDA providers
- Fixed EDA webhook configuration in vmaas-dev environment - corrected deployment to use correct service URLs (innabox-aap-eda-api:8000), improved experiment script provider verification to check environment variables instead of logs
- Investigated EDA performance improvement - discovered EDA provision time improved from 649s to ~140s (4.3x faster), verified speedup is real through controlled testing with both custom and official upstream operator images, ruled out operator code changes as cause, identified external infrastructure improvements as likely cause
- Created test automation scripts (create_ci.sh, delete_ci.sh) for ComputeInstance lifecycle testing
- Deployed multiple operator builds (74ced2e, 96423b5, 47428b4, fad351a) with refactored architecture and bug fixes

## Risks & Challenges
- Bug discovered: Concurrent provision and deprovision jobs - observed ComputeInstance with provision job still running during deletion phase while deprovision job was created prematurely, investigating race condition in job cancellation logic
- Critical issue: AAP Direct missing ReconciledConfigVersion update - when provision job succeeds, AAP provider doesn't set ReconciledConfigVersion which prevents controller from detecting spec changes vs already reconciled state
- Test scripts need provider-aware logic - AAP expects state transitions while EDA doesn't support status polling

## Key Effort
Provider abstraction refactoring and bug fixes to eliminate type switches and ensure clean separation between controller and provider-specific logic.
