---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring to eliminate type switches from controller ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))
  - Added `BlockDeletionOnFailure` field to CRD for crash-safe deletion policies
  - Created rich result types (`ProvisionResult`, `DeprovisionResult`) to replace provider name switching
  - Internalized provider-specific logic (AAP cancellation, EDA finalizer checks) into provider implementations
  - Modified 9 files, regenerated CRDs, all 90+ tests passing with zero linter issues
  - Deployed refactored operator: `quay.io/etabak/cloudkit-operator:74ced2e`
- Fixed EDA deletion infinite polling bug
  - Enhanced provider interface to pass resource object to status methods
  - EDA provider now checks AAP finalizer to detect completion instead of always returning "Running"
  - Maintains clean abstraction with no controller changes
  - Deployed fix: `quay.io/etabak/cloudkit-operator:96423b5`
  - Validated end-to-end with test script for ComputeInstance lifecycle
- Fixed vmaas-dev environment EDA webhook configuration
  - Diagnosed latency experiment failures caused by deployment pointing to non-existent service `innabox-eda-service:5000`
  - Updated webhook URLs to correct service `innabox-aap-eda-api:8000` (Deployment Revision 84)
  - Improved experiment script provider verification to check environment variables instead of logs
  - Cleaned up stuck VMs and processes from failed runs

## Risks & Challenges
- AAP Direct provider missing `ReconciledConfigVersion` update when provision job succeeds - controller can't detect spec changes vs already-reconciled state without this field populated in `ProvisionStatus`
- Need to investigate upstream deployment manifests to fix source of bad webhook URLs and prevent recurrence
- PR #102 needs updating with refactoring commits and code review feedback needs addressing

## Key Effort
Achieved complete provider abstraction by eliminating all type switches from controller and fixing EDA deletion polling bug while maintaining clean architecture.
