---
layout: default
title: Daily Status - 2026-02-09
date: 2026-02-09
---

# Daily Status - 2026-02-09

## Accomplishments
- Completed provider abstraction refactoring to eliminate all type switches from controller ([MGMT-22880](https://issues.redhat.com/browse/MGMT-22880))
  - Created rich result types (ProvisionResult, DeprovisionResult) with DeprovisionAction enum
  - Added BlockDeletionOnFailure field to CRD for crash-safe deletion policies
  - Internalized provider-specific logic (AAP cancellation, EDA finalizer checks) into provider implementations
  - Updated controller to use result types instead of provider name switching
  - All 90+ unit tests passing, zero linter issues
  - Deployed refactored operator: `quay.io/etabak/cloudkit-operator:74ced2e`
- Fixed EDA deletion infinite polling bug
  - Added resource parameter to GetProvisionStatus() and GetDeprovisionStatus() interface methods
  - EDA provider now checks AAP finalizer to detect deprovision completion
  - Maintains clean abstraction - no EDA-specific controller logic needed
  - Deployed and validated fix: `quay.io/etabak/cloudkit-operator:96423b5`
  - Created end-to-end test script validating full ComputeInstance lifecycle
- Fixed vmaas-dev environment webhook configuration
  - Updated cloudkit-operator deployment with correct EDA service URLs (`innabox-aap-eda-api:8000`)
  - Fixed broken webhooks pointing to non-existent `innabox-eda-service:5000`
  - Improved experiment script to verify provider via environment variables instead of logs
  - Cleaned up stuck VMs and processes from failed runs
  - Environment ready for latency testing

## Risks & Challenges
- AAP Direct provider missing ReconciledConfigVersion update - prevents detecting spec changes vs already-reconciled state
- Need to investigate upstream deployment manifests to fix source of incorrect webhook URLs
- PR #102 needs updating with refactoring commits and code review feedback

## Key Effort
Achieved complete provider abstraction in controller by eliminating type switches and moving provider-specific logic into implementations, then fixed EDA deletion bug while maintaining clean architecture.
