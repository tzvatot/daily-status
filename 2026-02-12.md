---
layout: default
title: Daily Status - 2026-02-12
date: 2026-02-12
---

# Daily Status - 2026-02-12

## Accomplishments
- Implemented status.jobs[] array refactoring for [MGMT-23031](https://issues.redhat.com/browse/MGMT-23031) based on PR #102 review feedback
- Completed 9 commits: API changes, infrastructure setup, controller helpers, AAP/EDA provider updates, linter fixes, and provider switch bug fixes
- Added JobType enum (provision, deprovision) and JobState enum (Pending, Waiting, Running, Succeeded, Failed, Canceled, Unknown)
- Refactored JobStatus struct with JobID, Type, Timestamp, and State fields
- Replaced ProvisionJob/DeprovisionJob with Jobs []JobStatus array in ComputeInstanceStatus
- Implemented configurable max job history (CLOUDKIT_MAX_JOB_HISTORY env var, default 10)
- Added helper functions: FindLatestJobByType, findJobByID, appendJob, updateJob
- Implemented EDA job ID generation (eda-webhook-N pattern with auto-increment)
- Consolidated JobState type to single source of truth in v1alpha1 package
- Organized job types in dedicated api/v1alpha1/job_types.go file
- All 69 unit tests passing with comprehensive coverage (41.5% controller, 66.1% provisioning)
- Updated PR #102 description with comprehensive jobs array implementation details
- Built and deployed operator image quay.io/etabak/cloudkit-operator:beec750 to vmaas-dev cluster
- Applied updated CRD to cluster with jobs array schema
- Updated osac-test-infra to use jobs array (commit a4c0262)
- Converted all kubectl jsonpath queries to jq with jobs array filtering
- Successfully tested AAP Direct provider (job IDs: 9076, 9079) with full state tracking (Pending → Running → Succeeded)
- Successfully tested EDA provider (job IDs: eda-webhook-1, eda-webhook-2) with incremental ID generation
- Ran latency experiment with 3 parallel runs per provider (6 VMs total): AAP 12% faster provision, 2% faster deprovision, 8.4% faster overall
- Tested delete-during-provision scenario: provision job canceled, single deprovision job created, no orphaned resources
- Fixed bug (commit 1d5dab3): AAP provider now handles EDA job IDs in isReadyForDeprovision for provider switch scenarios
- Fixed bug (commit beec750): Handle Deleting phase when EDA job has no deprovision yet
- Successfully tested provider switch scenario: EDA provision (eda-webhook-1) → AAP deprovision (9219)
- Validated jobs array is provider-agnostic and works with mixed provider types
- Created comprehensive provider switch test script (~/work/scripts/test_provider_switch.sh) with 9 phases
- Fixed shellcheck errors in osac-test-infra (commits d78c030, 4fe6989): Added set -o pipefail to shell commands with pipes

## Risks & Challenges
None

## Key Effort
Completed status.jobs[] array refactoring with full implementation, deployment, integration testing across AAP/EDA providers, and provider switch validation
