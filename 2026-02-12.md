---
layout: default
title: Daily Status - 2026-02-12
date: 2026-02-12
---

# Daily Status - 2026-02-12

## Accomplishments
- Implemented status.jobs[] array refactoring based on [PR #102](https://issues.redhat.com/browse/MGMT-102) review feedback
- Completed 9 commits covering API changes, infrastructure, controller helpers, provider updates, and bug fixes
- Added JobType enum (provision, deprovision) and JobState enum (Pending, Waiting, Running, Succeeded, Failed, Canceled, Unknown)
- Refactored JobStatus struct with JobID, Type, Timestamp, and State fields
- Replaced ProvisionJob/DeprovisionJob with Jobs []JobStatus array in ComputeInstanceStatus
- Implemented configurable max job history via CLOUDKIT_MAX_JOB_HISTORY env var
- Added helper functions: FindLatestJobByType(), findJobByID(), appendJob(), updateJob()
- Updated controller handleProvisioning() and handleDeprovisioning() to use jobs array
- Updated AAP provider to use FindLatestJobByType helper and jobs array pattern
- Consolidated JobState type as single source of truth in v1alpha1 package
- Created dedicated api/v1alpha1/job_types.go file with comprehensive unit tests
- Implemented EDA job ID generation (eda-webhook-N pattern) with edge case handling
- Fixed linter duplication warnings using Ginkgo DescribeTable pattern
- Added provider switch support: AAP can deprovision VMs provisioned by EDA
- Fixed critical bug handling Deleting phase when no deprovision job exists
- Deployed image quay.io/etabak/cloudkit-operator:beec750 to vmaas-dev cluster
- Applied updated CRD with jobs array schema to cluster
- All 69 unit tests passing with coverage at 41.5% (controller) and 66.1% (provisioning)
- End-to-end testing complete for both AAP Direct and EDA providers
- AAP test results: provision job 9076, deprovision job 9079, full state tracking (Pending → Running → Succeeded)
- EDA test results: eda-webhook-1 (provision), eda-webhook-2 (deprovision), UTC timestamps validated
- Performance testing: 6 parallel VMs (3 AAP + 3 EDA), AAP 8.4% faster overall, no performance regression from jobs array
- Delete-during-provision test passed: provision job canceled, single deprovision job, no duplicates or orphaned resources
- Provider switch test passed: EDA provision (eda-webhook-1) → AAP deprovision (9219), jobs array handled mixed provider types
- Updated osac-test-infra with jq-based queries for jobs array filtering (commit a4c0262)
- Fixed shellcheck errors in osac-test-infra playbooks and roles (commits d78c030, 4fe6989)
- Updated [PR #102](https://issues.redhat.com/browse/MGMT-102) description with comprehensive jobs array implementation details
- Migrated AAP provisioning documentation to jobs array pattern (osac-docs commit 778d3e9)
- Updated sequence diagrams and regenerated PNG images with jobs array operations
- Created MEMORY.md files documenting CRD regeneration workflow and daily status management

## Risks & Challenges
None

## Key Effort
Implemented and validated status.jobs[] array pattern with mixed-provider lifecycle support (EDA provision + AAP deprovision)
