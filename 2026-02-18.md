---
layout: default
title: Daily Status - 2026-02-18
date: 2026-02-18
---

# Daily Status - 2026-02-18

## Accomplishments

**Code Completion & Validation** ✅
- Fixed failing unit tests in `computeinstance_feedback_controller_test.go`
  - Updated 2 test fixtures to use `newTestComputeInstanceSpec()` helper
  - Ensures all required fields (cores, image, memoryGiB, bootDisk, runStrategy) are properly set
- Corrected import paths across entire codebase (61 files)
  - Migrated from `github.com/osac/osac-operator` to `github.com/osac-project/osac-operator`
- All validations passing:
  - ✅ Compilation
  - ✅ Formatting (go fmt)
  - ✅ Linter (golangci-lint): 0 issues
  - ✅ Unit tests: 42.7% controller coverage
  - ✅ Kustomize validation
  - ✅ Container build: `quay.io/etabak/cloudkit-operator:mgmt-23103-ca99608`

**Deployment** ✅
- Pushed 9 commits to fork (20 total in branch)
- Deployed operator to vmaas-dev cluster
- Image: `quay.io/etabak/cloudkit-operator:mgmt-23103-ca99608`
- Rollout completed successfully

**E2E Testing - Partial Success** ⚠️

Test Instance: `e2e-test-api-fields-10003548`

✅ **Provision Phase**:
- ComputeInstance created with explicit API fields (no templateParameters)
- Provision job 16063: Succeeded
- Template parameters generated correctly via `ensureBackwardCompatibility()`:
  - cpu_cores: 2
  - memory: 4Gi
  - disk_size: 20Gi
  - image_source: quay.io/containerdisks/fedora:latest
  - exposed_ports: 22/tcp
- ComputeInstance reached Running phase

✅ **RunStrategy Mutation Tests**:
- runStrategy=Halted: VM stopped successfully (spec.running=false, VMI terminated)
- runStrategy=Always: VM restarted successfully (spec.running=true, VMI running)

✅ **Immutability Validation Tests**:
- cores field: Patch rejected ✓
- memoryGiB field: Patch rejected ✓
- image field: Patch rejected ✓

❌ **Deprovision Phase**:
- Deprovision job 16067: Failed
- Error: "failed" (no detailed logs available - job expired)
- Operator logs confirm `ensureBackwardCompatibility()` was called before deprovision
- Parameters were sent to AAP via ansible_eda.event.payload structure
- Blocking deletion (as designed) to prevent orphaned resources

**Work on [MGMT-23103](https://issues.redhat.com/browse/MGMT-23103)**: ComputeInstance API Enhancement

**Technical Details**:
- Pull Request: https://github.com/osac-project/osac-operator/pull/111
- Enhancement Proposal: https://github.com/osac-project/enhancement-proposals/pull/21
- Commits Pushed: 9 new commits (20 total in branch)
- Files Modified: 77 total (API types, controllers, providers, import paths)

## Risks & Challenges

**Deprovision Failure**: AAP job 16067 failed with no detailed logs. Operator code appears correct - `ensureBackwardCompatibility()` is called before deprovision and parameters are generated correctly. Issue likely in AAP playbook rather than operator code. Need to capture AAP job logs during next test run to diagnose root cause.

**Module Path Mismatch Blocker**: Cannot complete rebase of PR #111 due to incorrect module path in main branch (`github.com/osac/osac-operator` vs actual repository `github.com/osac-project/osac-operator`). PR #111 is blocked waiting for PR #112 (module path fix) to be merged first.

**Next Steps Required**:
1. Delete stuck test instance `e2e-test-api-fields-10003548`
2. Run E2E test again and capture AAP job logs immediately
3. Investigate AAP deprovision playbook to understand failure
4. Wait for PR #112 merge, then rebase PR #111
5. Verify full lifecycle and complete PR review

## Key Effort

Completed full implementation and unit testing of ComputeInstance API enhancement for [MGMT-23103](https://issues.redhat.com/browse/MGMT-23103). Deployed to vmaas-dev and verified provision, runStrategy mutations, and immutability enforcement. Investigating deprovision failure and blocked on module path fix PR.
